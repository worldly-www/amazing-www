window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AlertView:[function(t,e,o){"use strict";cc._RF.push(e,"04ef7JyoRhP4rYjCRDEzNvt","AlertView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isQuit=!1,e.stars=null,e.nextSprite=null,e.quitSprite=null,e.replaySprite=null,e.GameScene=null,e}return n(e,t),e.prototype.getController=function(){return this.GameScene.getComponent("GameController")},e.prototype.next=function(t){var e=new cc.Color(255,78,0);this.setStars(!0,t).setTitleLabel("Completed",55,e).setButton(this.nextSprite,this.handleNext),this.setTitlePosition(96).setWinner(!0),this.node.active=!0},e.prototype.fail=function(t){var e=new cc.Color(62,62,62);this.setTitlePosition(74).setKitten(!1).setWinner(!1),this.setStars(!0,t).setTitleLabel("Failed",59,e).setButton(this.replaySprite,this.handleReplay),this.node.active=!0},e.prototype.confirm=function(){var t=new cc.Color(148,100,50);this.isQuit=!0,this.setTitlePosition(74).setWinner(!1).setStars(!1),this.setKitten(!0).setTitleLabel("Are you sure to quit the game?",42,t).setButton(this.quitSprite,this.handleQuit),this.node.active=!0,cc.director.pause()},e.prototype.handleNext=function(){this.getController().nextLevel(),this.node.active=!1},e.prototype.handleReplay=function(){this.getController().reload(),this.node.active=!1},e.prototype.handleQuit=function(){cc.director.resume(),cc.director.loadScene("Login")},e.prototype.handleClose=function(){this.isQuit||this.handleQuit(),this.isQuit=!1,this.node.active=!1,cc.director.resume()},e.prototype.setTitleLabel=function(t,e,o){var n=cc.find("/content/title",this.node),i=n.getComponent(cc.Label);return i.string=t,e&&(i.fontSize=e),o&&(n.color=o),this},e.prototype.setTitlePosition=function(t){return cc.find("/content/title",this.node).getComponent(cc.Widget).top=t,this},e.prototype.setStars=function(t,e){var o=cc.find("/content/Stars",this.node),n=cc.find("/content/Amount",this.node);t&&(cc.find("/content/Amount/Content",this.node).getComponent(cc.Label).string=e,o.getComponent("StarView").setStars(3));return o.active=t,n.active=t,this},e.prototype.setKitten=function(t){return cc.find("/content/Kitten",this.node).active=t,this},e.prototype.setButton=function(t,e){var o=cc.find("/content/Button",this.node),n=cc.find("/content/Button/Background",this.node);return o.on(cc.Node.EventType.TOUCH_START,e,this),n.getComponent(cc.Sprite).spriteFrame=t,this},e.prototype.setWinner=function(t){var e=cc.find("/content/Winner",this.node),o=cc.find("/content/Level",this.node),n=cc.find("/content/Trophy",this.node);return e.active=o.active=n.active=t,this},i([s(cc.Prefab)],e.prototype,"stars",void 0),i([s(cc.SpriteFrame)],e.prototype,"nextSprite",void 0),i([s(cc.SpriteFrame)],e.prototype,"quitSprite",void 0),i([s(cc.SpriteFrame)],e.prototype,"replaySprite",void 0),i([s(cc.Node)],e.prototype,"GameScene",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],AssetsView:[function(t,e,o){"use strict";cc._RF.push(e,"1396bXDdP5F1YoR7HH6SEz7","AssetsView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator.ccclass,c=t("../Utils/request"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){this.init()},e.prototype.init=function(){this.fetchScore(),this.fetchRanking()},e.prototype.fetchScore=function(){var t=this;c.default("/GameUserScoreReport/GetCurrentUserWeekScore").then(function(e){var o=e.code,n=e.data;0===o&&t.setTotalScore(n)})},e.prototype.fetchRanking=function(){var t=this;c.default("/GameUserScoreReport/GetCurrentUserWeekScoreRankings").then(function(e){var o=e.code,n=e.data1;if(0===o){var i=(n||[])[0],r=(void 0===i?{}:i).ranking,c=void 0===r?"":r;t.setTotalRanking(c)}})},e.prototype.findLabel=function(t){return cc.find("/"+t+"/background/label",this.node).getComponent(cc.Label)},e.prototype.setTotalScore=function(t){this.findLabel("TotalScore").string=t},e.prototype.setTotalRanking=function(t){this.findLabel("TotalRanking").string=t},e.prototype.setAMGBalance=function(t){this.findLabel("Balance").string=t},e=i([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../Utils/request":"request"}],AudioUtils:[function(t,e,o){"use strict";cc._RF.push(e,"fe151y+R2lFvas76dyah2Uf","AudioUtils"),cc.Class({extends:cc.Component,properties:{swap:{type:cc.AudioClip,default:null},click:{type:cc.AudioClip,default:null},eliminate:{type:[cc.AudioClip],default:[]},continuousMatch:{type:[cc.AudioClip],default:[]}},playClick:function(){cc.audioEngine.play(this.click,!1,1)},playSwap:function(){cc.audioEngine.play(this.swap,!1,1)},playEliminate:function(t){t=Math.min(this.eliminate.length-1,t),cc.audioEngine.play(this.eliminate[t],!1,1)},playContinuousMatch:function(t){(t=Math.min(t,11))<2||cc.audioEngine.play(this.continuousMatch[Math.floor(t/2)-1],!1,1)}}),cc._RF.pop()},{}],CellModel:[function(t,e,o){"use strict";cc._RF.push(e,"dae88GCevBMaK7lQqhume8G","CellModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=i;var n=t("./ConstValue");function i(){this.type=null,this.status=n.CELL_STATUS.COMMON,this.x=1,this.y=1,this.startX=1,this.startY=1,this.cmd=[],this.isDeath=!1,this.objecCount=Math.floor(1e3*Math.random())}i.prototype.init=function(t){this.type=t},i.prototype.isEmpty=function(){return this.type==n.CELL_TYPE.EMPTY},i.prototype.isGem=function(){return this.status==n.CELL_STATUS.GEM},i.prototype.setEmpty=function(){this.type=n.CELL_TYPE.EMPTY},i.prototype.setXY=function(t,e){this.x=t,this.y=e},i.prototype.setStartXY=function(t,e){this.startX=t,this.startY=e},i.prototype.setStatus=function(t){this.status=t},i.prototype.setTypeAndStatus=function(t){this.type=t,t>=n.CELL_TYPE.GEM&&(this.status=n.CELL_STATUS.GEM)},i.prototype.moveToAndBack=function(t){var e=cc.v2(this.x,this.y);this.cmd.push({action:"moveTo",keepTime:n.ANITIME.TOUCH_MOVE,playTime:0,pos:t}),this.cmd.push({action:"moveTo",keepTime:n.ANITIME.TOUCH_MOVE,playTime:n.ANITIME.TOUCH_MOVE,pos:e})},i.prototype.moveTo=function(t,e){cc.v2(this.x,this.y);this.cmd.push({action:"moveTo",keepTime:n.ANITIME.TOUCH_MOVE,playTime:e,pos:t}),this.x=t.x,this.y=t.y},i.prototype.toDie=function(t){this.cmd.push({action:"toDie",playTime:t,keepTime:n.ANITIME.DIE}),this.isDeath=!0},i.prototype.toShake=function(t){this.cmd.push({action:"toShake",playTime:t,keepTime:n.ANITIME.DIE_SHAKE})},i.prototype.setVisible=function(t,e){this.cmd.push({action:"setVisible",playTime:t,keepTime:0,isVisible:e})},i.prototype.moveToAndDie=function(t){},i.prototype.isBird=function(){return this.type==n.CELL_TYPE.G},e.exports=o.default,cc._RF.pop()},{"./ConstValue":"ConstValue"}],CellView:[function(t,e,o){"use strict";cc._RF.push(e,"fbf19Cx4ptFV62UZ7+qJJpQ","CellView");var n=t("../Model/ConstValue");cc.Class({extends:cc.Component,properties:{defaultFrame:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.isSelect=!1},initWithModel:function(t){this.model=t;var e=t.startX,o=t.startY;this.node.x=n.CELL_WIDTH*(e-.5)+10*e,this.node.y=n.CELL_HEIGHT*(o-.5)+10*o},updateView:function(){var t=this,e=this.model.cmd;if(!(e.length<=0)){var o,i=[],r=0;for(var c in e){if(e[c].playTime>r){var s=cc.delayTime(e[c].playTime-r);i.push(s)}if("moveTo"==e[c].action){var a=(e[c].pos.x-.5)*n.CELL_WIDTH+10*e[c].pos.x,l=(e[c].pos.y-.5)*n.CELL_HEIGHT+10*e[c].pos.y,u=cc.moveTo(n.ANITIME.TOUCH_MOVE,cc.v2(a,l));i.push(u)}else if("toDie"==e[c].action){if(this.status==n.CELL_STATUS.BIRD)this.node.getComponent(cc.Animation).play("effect"),i.push(cc.delayTime(n.ANITIME.BOMB_BIRD_DELAY));var p=cc.callFunc(function(){this.node.destroy()},this);i.push(p)}else if("setVisible"==e[c].action)(function(){var o=e[c].isVisible;i.push(cc.callFunc(function(){this.node.opacity=o?255:0},t))})();else if("toShake"==e[c].action){var h=cc.rotateBy(.4,60);i.push(h)}r=e[c].playTime+e[c].keepTime}if(1==i.length)this.node.runAction(i[0]);else this.node.runAction((o=cc).sequence.apply(o,i))}},setSelect:function(t){var e=this.node.getChildByName("select");e&&(e.active=t),this.isSelect=t}}),cc._RF.pop()},{"../Model/ConstValue":"ConstValue"}],ConstValue:[function(t,e,o){"use strict";cc._RF.push(e,"f9088esGbNBtJmNaJsz0Gq4","ConstValue"),Object.defineProperty(o,"__esModule",{value:!0});o.CELL_TYPE={EMPTY:0,BIRD:16,BOMB:16,GEM:17},o.CELL_BASENUM=15,o.CELL_STATUS={COMMON:0,CLICK:"click",LINE:"line",COLUMN:"column",WRAP:"wrap",BIRD:"bird",BOMB:"bomb",GEM:"gem"};var n=o.GRID_WIDTH=8,i=o.GRID_HEIGHT=8,r=o.CELL_WIDTH=100,c=o.CELL_HEIGHT=100;o.GRID_PIXEL_WIDTH=n*r+100,o.GRID_PIXEL_HEIGHT=i*c+100,o.CELL_SCORE_ENUM={3:3,4:6,5:10,6:15,7:21,8:28},o.ANITIME={TOUCH_MOVE:.3,DIE:.2,DOWN:.5,BOMB_DELAY:.3,BOMB_BIRD_DELAY:.7,DIE_SHAKE:.4};cc._RF.pop()},{}],CountView:[function(t,e,o){"use strict";cc._RF.push(e,"db2ab71UppFL7O6wYaB7ypn","CountView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.value=0,e}return n(e,t),e.prototype.start=function(){cc.find("background/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.icon},i([s(cc.SpriteFrame)],e.prototype,"icon",void 0),i([s],e.prototype,"value",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],EffectLayer:[function(t,e,o){"use strict";cc._RF.push(e,"0e925myn0dIjqdao1TpipF9","EffectLayer");var n=t("../Model/ConstValue"),i=function(t){return t&&t.__esModule?t:{default:t}}(t("../Utils/AudioUtils"));cc.Class({extends:cc.Component,properties:{bombWhite:{default:null,type:cc.Prefab},crushEffect:{default:null,type:cc.Prefab},audioUtils:{type:i.default,default:null}},playEffects:function(t){if(t&&!(t.length<=0)){var e={};t.forEach(function(t){var o=cc.delayTime(t.playTime),i=cc.callFunc(function(){var o=null,i=null;"crush"==t.action?((i=(o=cc.instantiate(this.crushEffect)).getComponent(cc.Animation)).play("effect"),!e["crush"+t.playTime]&&this.audioUtils.playEliminate(t.step),e["crush"+t.playTime]=!0):"rowBomb"==t.action?(i=(o=cc.instantiate(this.bombWhite)).getComponent(cc.Animation)).play("effect_line"):"colBomb"==t.action&&(i=(o=cc.instantiate(this.bombWhite)).getComponent(cc.Animation)).play("effect_col"),o.x=n.CELL_WIDTH*(t.pos.x-.5)+10*t.pos.x,o.y=n.CELL_WIDTH*(t.pos.y-.5)+10*t.pos.y,o.parent=this.node,i.on("finished",function(){o.destroy()},this)},this);this.node.runAction(cc.sequence(o,i))},this)}}}),cc._RF.pop()},{"../Model/ConstValue":"ConstValue","../Utils/AudioUtils":"AudioUtils"}],GameController:[function(t,e,o){"use strict";cc._RF.push(e,"03c7dHj2l9LzbCh3OGtIaJo","GameController");var n=function(){function t(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var c,s=t[Symbol.iterator]();!(n=(c=s.next()).done)&&(o.push(c.value),!e||o.length!==e);n=!0);}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(t("../Model/GameModel"));cc.Class({extends:cc.Component,properties:{grid:{type:cc.Node,default:null},sider:{type:cc.Node,default:null}},onLoad:function(){this.gameModel=new i.default,this.gameModel.init(5);var t=this.getGridScript();t.setController(this),t.initWithCellModels(this.gameModel.getCells())},getGridScript:function(){return this.grid.getComponent("GridView")},getSiderScript:function(){return this.sider.getComponent("SiderView")},reload:function(){this.cleanCell(),this.getSiderScript().resetAmount("100")},nextLevel:function(){this.gameModel.curLevel++,this.reload()},selectCell:function(t){var e=this.gameModel.selectCell(t),o=this.gameModel.getScore();return this.addCurrentAmount(o),e},addCurrentAmount:function(t){var e=this.gameModel.curTime;this.getSiderScript().scheduleOnce(function(){this.addCurrentAmount(t)},e-.1)},cleanCmd:function(){this.gameModel.cleanCmd()},cleanCell:function(){var t=this.getGridScript(),e=this.gameModel.reinit(),o=n(e,2),i=o[0],r=o[1];t.playEffect(r),t.updateView(i),this.cleanCmd()}}),cc._RF.pop()},{"../Model/GameModel":"GameModel"}],GameModelTest:[function(t,e,o){"use strict";cc._RF.push(e,"16fce9lOkpA7a2vuhmMkDMZ","GameModelTest"),cc.Class({extends:cc.Component,properties:{}}),cc._RF.pop()},{}],GameModel:[function(t,e,o){"use strict";cc._RF.push(e,"cc442HaMlBE/ZKi7W/YUKwd","GameModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=r;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./CellModel")),i=t("./ConstValue");function r(){this.cells=null,this.cellBgs=null,this.lastPos=cc.v2(-1,-1),this.cellTypeNum=5,this.cellCreateType=[],this.curLevel=1}r.prototype.init=function(t){this.cells=[],this.setCellTypeNum(t||this.cellTypeNum);for(var e=1;e<=i.GRID_WIDTH;e++){this.cells[e]=[];for(var o=1;o<=i.GRID_HEIGHT;o++)this.cells[e][o]=new n.default}for(e=1;e<=i.GRID_WIDTH;e++)for(o=1;o<=i.GRID_HEIGHT;o++)for(var r=!0;r;){r=!1,this.cells[e][o].init(this.getRandomCellType()),this.checkPoint(o,e)[0].length>2&&(r=!0),this.cells[e][o].setXY(o,e),this.cells[e][o].setStartXY(o,e)}},r.prototype.reinit=function(){this.cleanCell(),this.curTime+=i.ANITIME.DIE+i.ANITIME.TOUCH_MOVE;for(var t=1;t<=i.GRID_WIDTH;t++){this.cells[t]=[];for(var e=1;e<=i.GRID_HEIGHT;e++){var o=!0,r=new n.default;for(this.cells[t][e]=r;o;){o=!1,r.init(this.getRandomCellType()),this.checkPoint(e,t)[0].length>2&&(o=!0),r.setXY(e,t+i.GRID_HEIGHT),r.setStartXY(e,t+i.GRID_HEIGHT),r.moveTo(cc.v2(e,t),this.curTime),this.changeModels.push(this.cells[t][e])}}}return[this.changeModels,this.effectsQueue]},r.prototype.initWithData=function(t){},r.prototype.checkPoint=function(t,e){var o=function(t,e,o){var n=[],i=[];i[t+8*e]=!0,n.push(cc.v2(t,e));for(var r=0;r<n.length;){var c=n[r],s=this.cells[c.y][c.x];if(r++,s)for(var a=0;a<o.length;a++){var l=c.x+o[a].x,u=c.y+o[a].y,p=(this.cells[u]||[])[l];!i[l+8*u]&&p&&(s.type==p.type?(i[l+8*u]=!0,n.push(cc.v2(l,u))):p.isGem()&&this.gemResult.push(cc.v2(l,u)))}}return n};this.gemResult=[];var n=o.call(this,t,e,[cc.v2(1,0),cc.v2(-1,0)]),r=o.call(this,t,e,[cc.v2(0,-1),cc.v2(0,1)]),c=[],s="";if(n.length>=5||r.length>=5?s=i.CELL_STATUS.BOMB:n.length>=3&&r.length>=3?s=i.CELL_STATUS.WRAP:n.length>=4?s=i.CELL_STATUS.LINE:r.length>=4&&(s=i.CELL_STATUS.COLUMN),n.length>=3&&(c=n),r.length>=3){var a=c.concat();r.forEach(function(t){var e=!1;a.forEach(function(o){t.x==o.x&&t.y==o.y&&(e=!0)},this),e||c.push(t)},this)}return[c,s,this.cells[e][t].type]},r.prototype.printInfo=function(){console.group("print");for(var t=1;t<=8;t++){for(var e="",o=1;o<=8;o++)e+=this.cells[t][o].type+" ";console.log(e)}console.groupEnd()},r.prototype.getCells=function(){return this.cells},r.prototype.getScore=function(){return this.curScore},r.prototype.selectCell=function(t){this.curScore=0,this.changeModels=[],this.effectsQueue=[];var e=this.lastPos,o=this.cells[t.y][t.x],n=Math.abs(t.x-e.x)+Math.abs(t.y-e.y);if(o.isGem())return this.lastPos=cc.v2(-1,-1),[[],[]];if(o.status===i.CELL_STATUS.BOMB)return this.curTime=0,this.lastPos=cc.v2(-1,-1),this.processBomb([o],0),this.down(),[this.changeModels,this.effectsQueue];if(1!=n)return this.lastPos=t,[[],[]];var r=this.cells[e.y][e.x];this.exchangeCell(e,t);var c=this.checkPoint(t.x,t.y)[0],s=this.checkPoint(e.x,e.y)[0];this.curTime=0,this.pushToChangeModels(o),this.pushToChangeModels(r);var a=o.status!=i.CELL_STATUS.COMMON&&r.status!=i.CELL_STATUS.COMMON||o.status==i.CELL_STATUS.BOMB||r.status==i.CELL_STATUS.BOMB;if(c.length<3&&s.length<3&&!a)return this.exchangeCell(e,t),o.moveToAndBack(e),r.moveToAndBack(t),this.lastPos=cc.v2(-1,-1),[this.changeModels];this.lastPos=cc.v2(-1,-1),o.moveTo(e,this.curTime),r.moveTo(t,this.curTime);var l=[t,e];return this.curTime+=i.ANITIME.TOUCH_MOVE,this.processCrush(l),[this.changeModels,this.effectsQueue]},r.prototype.processCrush=function(t){for(var e=0;t.length>0;){var o=[];if(0==e&&2==t.length){var n=t[0],r=t[1],c=this.cells[n.y][n.x],s=this.cells[r.y][r.x];c.status!=i.CELL_STATUS.BOMB&&s.status!=i.CELL_STATUS.BOMB||(c.status==i.CELL_STATUS.BOMB?(c.type=s.type,o.push(c)):(s.type=c.type,o.push(s)))}for(var a in t){var l=t[a];if(this.cells[l.y][l.x]){var u=this.checkPoint(l.x,l.y),p=u[0],h=u[1],f=u[2];if(!(p.length<3)){var d=!0,y=!1,v=void 0;try{for(var _,m=this.gemResult[Symbol.iterator]();!(d=(_=m.next()).done);d=!0){var C=_.value;this.crushCell(C.x,C.y,!1,e)}}catch(t){y=!0,v=t}finally{try{!d&&m.return&&m.return()}finally{if(y)throw v}}for(var T in p){var g=this.cells[p[T].y][p[T].x];g.isGem()||this.crushCell(p[T].x,p[T].y,!1,e),g.status!=i.CELL_STATUS.COMMON&&o.push(g)}this.curScore+=i.CELL_SCORE_ENUM[p.length],this.createNewCell(l,h,f)}}}this.processBomb(o,e),this.curTime+=i.ANITIME.DIE,t=this.down(),e++}},r.prototype.createNewCell=function(t,e,o){if(""!=e){e==i.CELL_STATUS.BOMB&&(o=i.CELL_TYPE.BOMB);var r=new n.default;this.cells[t.y][t.x]=r,r.init(o),r.setStartXY(t.x,t.y),r.setXY(t.x,t.y),r.setStatus(e),r.setVisible(0,!1),r.setVisible(this.curTime,!0),this.changeModels.push(r)}},r.prototype.down=function(){for(var t=[],e=1;e<=i.GRID_WIDTH;e++)for(var o=1;o<=i.GRID_HEIGHT;o++)if(null==this.cells[e][o]){for(var r=e,c=r;c<=i.GRID_HEIGHT;c++)this.cells[c][o]&&(this.pushToChangeModels(this.cells[c][o]),t.push(this.cells[c][o]),this.cells[r][o]=this.cells[c][o],this.cells[c][o]=null,this.cells[r][o].setXY(o,r),this.cells[r][o].moveTo(cc.v2(o,r),this.curTime),r++);var s=1;for(c=r;c<=i.GRID_HEIGHT;c++)this.cells[c][o]=new n.default,this.cells[c][o].setTypeAndStatus(this.getRandomCellType(!0)),this.cells[c][o].setStartXY(o,s+i.GRID_HEIGHT),this.cells[c][o].setXY(o,s+i.GRID_HEIGHT),this.cells[c][o].moveTo(cc.v2(o,c),this.curTime),s++,this.changeModels.push(this.cells[c][o]),t.push(this.cells[c][o])}return this.curTime+=i.ANITIME.TOUCH_MOVE+.3,t},r.prototype.pushToChangeModels=function(t){-1==this.changeModels.indexOf(t)&&this.changeModels.push(t)},r.prototype.cleanCmd=function(){for(var t=1;t<=i.GRID_WIDTH;t++)for(var e=1;e<=i.GRID_HEIGHT;e++)this.cells[t][e]&&(this.cells[t][e].cmd=[])},r.prototype.cleanCell=function(){this.curTime=0,this.changeModels=[],this.effectsQueue=[];for(var t=1;t<=i.GRID_WIDTH;t++)for(var e=1;e<=i.GRID_HEIGHT;e++){var o=this.cells[t][e];o&&this.crushCell(o.x,o.y,!1,t-1)}return[this.changeModels,this.effectsQueue]},r.prototype.exchangeCell=function(t,e){var o=this.cells[t.y][t.x];this.cells[t.y][t.x]=this.cells[e.y][e.x],this.cells[t.y][t.x].x=t.x,this.cells[t.y][t.x].y=t.y,this.cells[e.y][e.x]=o,this.cells[e.y][e.x].x=e.x,this.cells[e.y][e.x].y=e.y},r.prototype.setCellTypeNum=function(t){this.cellTypeNum=t,this.cellCreateType=[];for(var e=1;e<=t;e++)for(;;){var o=Math.floor(Math.random()*i.CELL_BASENUM)+1;if(-1==this.cellCreateType.indexOf(o)){this.cellCreateType.push(o);break}}},r.prototype.getRandomCellType=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getRandomGemType();if(t&&e)return e;var o=Math.floor(Math.random()*this.cellTypeNum);return this.cellCreateType[o]},r.prototype.getRandomGemType=function(){return Math.floor(100*Math.random())<=5?i.CELL_TYPE.GEM:null},r.prototype.processBomb=function(t,e){for(var o=this,n=function(){var n=[],r=i.ANITIME.BOMB_DELAY;t.forEach(function(t){if(t.status==i.CELL_STATUS.LINE){for(var o=1;o<=i.GRID_WIDTH;o++){var c=this.cells[t.y][o];c&&(c.status==i.CELL_STATUS.COMMON||c.isGem()||n.push(c),this.crushCell(o,t.y,!1,e))}this.addRowBomb(this.curTime,cc.v2(t.x,t.y))}else if(t.status==i.CELL_STATUS.COLUMN){for(var s=1;s<=i.GRID_HEIGHT;s++){var a=a;a&&(a.status==i.CELL_STATUS.COMMON||a.isGem()||n.push(a),this.crushCell(t.x,s,!1,e))}this.addColBomb(this.curTime,cc.v2(t.x,t.y))}else if(t.status==i.CELL_STATUS.WRAP||t.status===i.CELL_STATUS.BOMB)for(var l=t.x,u=t.y,p=u-1;p<=u+1;p++)for(var h=l-1;h<=l+1;h++){var f=(this.cells[p]||[])[h];f&&(f.status==i.CELL_STATUS.COMMON||f.isGem()||n.push(f),this.curScore++,this.crushCell(h,p,!1,e))}else if(t.status==i.CELL_STATUS.BIRD){var d=t.type;r<i.ANITIME.BOMB_BIRD_DELAY&&(r=i.ANITIME.BOMB_BIRD_DELAY),d==i.CELL_TYPE.BIRD&&(d=this.getRandomCellType());for(var y=1;y<=i.GRID_HEIGHT;y++)for(var v=1;v<=i.GRID_WIDTH;v++)this.cells[y][v]&&this.cells[y][v].type==d&&(this.cells[y][v].status!=i.CELL_STATUS.COMMON&&n.push(this.cells[y][v]),this.crushCell(v,y,!0,e))}},o),t.length>0&&(o.curTime+=r),t=n};t.length>0;)n()},r.prototype.addCrushEffect=function(t,e,o){this.effectsQueue.push({playTime:t,pos:e,action:"crush",step:o})},r.prototype.addRowBomb=function(t,e){this.effectsQueue.push({playTime:t,pos:e,action:"rowBomb"})},r.prototype.addColBomb=function(t,e){this.effectsQueue.push({playTime:t,pos:e,action:"colBomb"})},r.prototype.addWrapBomb=function(t,e){},r.prototype.crushCell=function(t,e,o,n){var r=this.cells[e][t];this.pushToChangeModels(r),o?(r.toShake(this.curTime),r.toDie(this.curTime+i.ANITIME.DIE_SHAKE)):r.toDie(this.curTime),this.addCrushEffect(this.curTime,cc.v2(r.x,r.y),n),this.cells[e][t]=null},e.exports=o.default,cc._RF.pop()},{"./CellModel":"CellModel","./ConstValue":"ConstValue"}],GridView:[function(t,e,o){"use strict";cc._RF.push(e,"d0d1fDj9rlDx5QUtP+2toQV","GridView");var n=t("../Model/ConstValue"),i=function(t){return t&&t.__esModule?t:{default:t}}(t("../Utils/AudioUtils"));cc.Class({extends:cc.Component,properties:{aniPre:{default:[],type:[cc.Prefab]},effectLayer:{default:null,type:cc.Node},audioUtils:{type:i.default,default:null}},onLoad:function(){this.setListener(),this.lastTouchPos=cc.Vec2(-1,-1),this.isCanMove=!0,this.isInPlayAni=!1},setController:function(t){this.controller=t},initWithCellModels:function(t){this.cellViews=[];for(var e=1;e<=8;e++){this.cellViews[e]=[];for(var o=1;o<=8;o++){var n=t[e][o].type,i=cc.instantiate(this.aniPre[n]);i.parent=this.node,i.getComponent("CellView").initWithModel(t[e][o]),this.cellViews[e][o]=i}}},setListener:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(this.isInPlayAni)return!0;var e=t.getLocation(),o=this.convertTouchPosToCell(e);if(o){var n=this.selectCell(o);this.isCanMove=n.length<3}else this.isCanMove=!1;return!0},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.isCanMove){var e=t.getStartLocation(),o=this.convertTouchPosToCell(e),n=t.getLocation(),i=this.convertTouchPosToCell(n);if(o.x!=i.x||o.y!=i.y){this.isCanMove=!1;this.selectCell(i)}}},this)},convertTouchPosToCell:function(t){if((t=this.node.convertToNodeSpace(t)).x<0||t.x>=n.GRID_PIXEL_WIDTH||t.y<0||t.y>=n.GRID_PIXEL_HEIGHT)return!1;var e=Math.floor(t.x/(n.CELL_WIDTH+10))+1,o=Math.floor(t.y/(n.CELL_HEIGHT+10))+1;return cc.v2(e,o)},updateView:function(t){var e=[];for(var o in t){var n=t[o],i=this.findViewByModel(n),r=null;if(i)r=i.view,this.cellViews[i.y][i.x]=null;else{var c=n.type,s=cc.instantiate(this.aniPre[c]);s.parent=this.node,s.getComponent("CellView").initWithModel(n),r=s}r.getComponent("CellView").updateView(),n.isDeath||e.push({model:n,view:r})}e.forEach(function(t){var e=t.model;this.cellViews[e.y][e.x]=t.view},this)},updateSelect:function(t){for(var e=1;e<=8;e++)for(var o=1;o<=8;o++)if(this.cellViews[e][o]){var n=this.cellViews[e][o].getComponent("CellView");t.x==o&&t.y==e?n.setSelect(!0):n.setSelect(!1)}},findViewByModel:function(t){for(var e=1;e<=8;e++)for(var o=1;o<=8;o++)if(this.cellViews[e][o]&&this.cellViews[e][o].getComponent("CellView").model==t)return{view:this.cellViews[e][o],x:o,y:e};return null},getPlayAniTime:function(t){if(!t)return 0;var e=0;return t.forEach(function(t){t.cmd.forEach(function(t){e<t.playTime+t.keepTime&&(e=t.playTime+t.keepTime)},this)},this),e},getStep:function(t){return t?t.reduce(function(t,e){return Math.max(t,e.step||0)},0):0},disableTouch:function(t,e){t<=0||(this.isInPlayAni=!0,this.node.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){this.isInPlayAni=!1,this.audioUtils.playContinuousMatch(e)},this))))},selectCell:function(t){var e=this.controller.selectCell(t),o=e[0],n=e[1];return this.playEffect(n),this.disableTouch(this.getPlayAniTime(o),this.getStep(n)),this.updateView(o),this.controller.cleanCmd(),o.length>=2?(this.updateSelect(cc.v2(-1,-1)),this.audioUtils.playSwap()):(this.updateSelect(t),this.audioUtils.playClick()),o},playEffect:function(t){this.effectLayer.getComponent("EffectLayer").playEffects(t)}}),cc._RF.pop()},{"../Model/ConstValue":"ConstValue","../Utils/AudioUtils":"AudioUtils"}],ItemView:[function(t,e,o){"use strict";cc._RF.push(e,"eee54JCUjlCHLqqpIAGhDom","ItemView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Date=null,e.Point=null,e.Reward=null,e.PointTo=null,e.RewardTo=null,e}return n(e,t),e.prototype.init=function(t){var e=t.date,o=t.sumScore;this.Date.getComponent(cc.Label).string=e,this.Point.getComponent(cc.Label).string=o,this.Reward.getComponent(cc.Label).string=o,this.PointTo.getComponent(cc.Label).string=o,this.RewardTo.getComponent(cc.Label).string=o},i([s(cc.Node)],e.prototype,"Date",void 0),i([s(cc.Node)],e.prototype,"Point",void 0),i([s(cc.Node)],e.prototype,"Reward",void 0),i([s(cc.Node)],e.prototype,"PointTo",void 0),i([s(cc.Node)],e.prototype,"RewardTo",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],LoginController:[function(t,e,o){"use strict";cc._RF.push(e,"5f4845Bus5AQoZakK7KAXht","LoginController");var n=function(t){return t&&t.__esModule?t:{default:t}}(t("../Utils/request"));cc.Class({extends:cc.Component,properties:{loadingBar:{type:cc.ProgressBar,default:null},loginButton:{type:cc.Button,default:null},worldSceneBGM:{type:cc.AudioClip,default:null}},onLoad:function(){this.gameSceneBGMAudioId=cc.audioEngine.play(this.worldSceneBGM,!0,1)},handleLogin:function(){(0,n.default)("/GameUser/GameUserLogin",{method:"POST",data:{walletId:"zyn",walletkey:"507cf7eb2bf0145005c8bb744e547434"}}).then(function(t){var e=t.Token;cc.sys.localStorage.setItem("token",e),cc.sys.localStorage.setItem("walletId","zyn")})},handleStart:function(){this.loginButton.node.active=!1,cc.director.preloadScene("Game",function(){this.loginButton.node.active=!0,cc.director.loadScene("Game")}.bind(this))},onDestroy:function(){cc.audioEngine.stop(this.gameSceneBGMAudioId)}}),cc._RF.pop()},{"../Utils/request":"request"}],ModalView:[function(t,e,o){"use strict";cc._RF.push(e,"7feablNv/hNn4cEF70daJHj","ModalView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator.ccclass,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){},e.prototype.handleOpen=function(){this.node.active=!0},e.prototype.handleClose=function(){this.node.active=!1},e=i([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],RankView:[function(t,e,o){"use strict";cc._RF.push(e,"309b3/hN7tItbIIqX/5Vj3x","RankView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=t("../Utils/request"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.row=null,e.data=[],e.columns=[],e.pagination={current:0,pageSize:10,total:0},e}return n(e,t),e.prototype.onEnable=function(){var t=this;a.default("/GameUserScoreReport/GetCurrentUserWeekScoreRankings").then(function(e){var o=e.data,n=e.data1;t.init(o,[{dataIndex:"ranking",fontSize:29},{dataIndex:"key",fontSize:14},{dataIndex:"sumScore",fontSize:14}]),t.setFooter(n[0])})},e.prototype.init=function(t,e){this.data=t,this.columns=e,this.pagination.total=t.length,this.renderRows()},e.prototype.renderRows=function(){var t=this.pagination,e=t.current,o=t.pageSize,n=e*o,i=this.data.slice(n,n+o);if(Array.isArray(i)){var r=cc.find("/table/tbody",this.node);r.destroyAllChildren();for(var c=0,s=i;c<s.length;c++){var a=s[c],l=cc.instantiate(this.row);l.getComponent("RowView").init(this.columns,a),l.parent=r}}},e.prototype.handlePrev=function(){this.pagination.current>0&&(this.pagination.current--,this.renderRows())},e.prototype.handleNext=function(){var t=this.pagination,e=t.current,o=t.pageSize;e<t.total/o-1&&(this.pagination.current++,this.renderRows())},e.prototype.getFootLable=function(t){return cc.find("/table/tfoot/"+t+"/Value",this.node).getComponent(cc.Label)},e.prototype.setFooter=function(t){this.getFootLable("Rank").string=t.ranking,this.getFootLable("Week").string="44",this.getFootLable("Reward").string=t.sumScore},i([s(cc.Prefab)],e.prototype,"row",void 0),e=i([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Utils/request":"request"}],RewardView:[function(t,e,o){"use strict";cc._RF.push(e,"496053DwNJFu7bTdixXPMCu","RewardView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=t("../Utils/request"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e.data=[],e.columns=[],e.pagination={current:0,pageSize:2,total:0},e}return n(e,t),e.prototype.onEnable=function(){var t=this;a.default("/GameUserScoreReport/GetCurrentUserWeekScoreRankings").then(function(e){var o=e.data;e.data1;t.init(o,[{dataIndex:"ranking",fontSize:29},{dataIndex:"key",fontSize:14},{dataIndex:"sumScore",fontSize:14}])})},e.prototype.init=function(t,e){this.data=t,this.columns=e,this.pagination.total=t.length,this.renderRows()},e.prototype.renderRows=function(){var t=this.pagination,e=t.current,o=t.pageSize,n=e*o,i=this.data.slice(n,n+o);if(Array.isArray(i)){this.node.destroyAllChildren();for(var r=0,c=i;r<c.length;r++){var s=c[r],a=cc.instantiate(this.item);a.getComponent("ItemView").init(this.columns,s),a.parent=this.node}}},e.prototype.handlePrev=function(){this.pagination.current>0&&(this.pagination.current--,this.renderRows())},e.prototype.handleNext=function(){var t=this.pagination,e=t.current,o=t.pageSize;e<t.total/o-1&&(this.pagination.current++,this.renderRows())},i([s(cc.Prefab)],e.prototype,"item",void 0),e=i([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Utils/request":"request"}],RowView:[function(t,e,o){"use strict";cc._RF.push(e,"8b887+J10lOv5DmEbXJpij2","RowView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator.ccclass,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(t,e){if(Array.isArray(t))for(var o=0,n=t;o<n.length;o++){var i=n[o],r=i.dataIndex,c=i.fontSize,s=this.createColumn().getComponent(cc.Label);s.string=e[r],s.fontSize=c}},e.prototype.createColumn=function(){var t=new cc.Node("Column"),e=t.addComponent(cc.Label);return e.horizontalAlign=cc.Label.HorizontalAlign.CENTER,e.verticalAlign=cc.Label.VerticalAlign.CENTER,t.color=new cc.Color(150,88,47),t.parent=this.node,t},e=i([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],SiderView:[function(t,e,o){"use strict";cc._RF.push(e,"d6c9eMMVmRHgZ0oP1eyRERn","SiderView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=1,e.targetAmount="100",e.currentAmount="0",e.alert=null,e}return n(e,t),e.prototype.resetAmount=function(t){this.setCurrentStars("0"),this.setCurrentAmount("0"),this.setTargetAmount(t)},e.prototype.setTargetAmount=function(t){this.targetAmount=t,cc.find("/Target/Content",this.node).getComponent(cc.Label).string=t},e.prototype.setCurrentAmount=function(t){this.currentAmount=t,cc.find("/Current/Content",this.node).getComponent(cc.Label).string=t},e.prototype.addCurrentAmount=function(t){var e=""+(Number(this.currentAmount)+Number(t));(this.setCurrentStars(e),this.setCurrentAmount(e),Number(e)>=Number(this.targetAmount))&&this.alert.getComponent("AlertView").next(e)},e.prototype.setCurrentStars=function(t){var e=cc.find("Stars",this.node),o=t/(Number(this.targetAmount)/3);e.getComponent("StarView").setStars(o)},i([s(cc.Node)],e.prototype,"alert",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],SignInView:[function(t,e,o){"use strict";cc._RF.push(e,"ca2b80J6fhL2qtN11DoCAHH","SignInView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=cc._decorator,s=c.ccclass,a=c.property,l=t("../Utils/request");(function(t){t[t.Monday=0]="Monday",t[t.Tuesday=1]="Tuesday",t[t.Wednesday=2]="Wednesday",t[t.Thursday=3]="Thursday",t[t.Friday=4]="Friday",t[t.Saturday=5]="Saturday",t[t.Sunday=6]="Sunday"})(r||(r={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.check=null,e}return n(e,t),e.prototype.onEnable=function(){var t=this;l.default("/GameUserSign/currentUserSignScoreList").then(function(e){for(var o=e.Data,n=t.node.children,i=0,c=o;i<c.length;i++){var s=c[i],a=n[r[s.weekDay]],l=cc.find("/Background/Icon",a);l.width=91,l.height=79,l.getComponent(cc.Sprite).spriteFrame=t.check}})},e.prototype.handleSign=function(){l.default("/GameUserSign/AddSignScore",{method:"POST"})},i([a(cc.SpriteFrame)],e.prototype,"check",void 0),e=i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Utils/request":"request"}],StarView:[function(t,e,o){"use strict";cc._RF.push(e,"27fd3rAretLGLiCfr0dcqmU","StarView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultSprite=null,e.activeSprite=null,e}return n(e,t),e.prototype.setStars=function(t){var e=this;void 0===t&&(t=0),this.node.children.forEach(function(o,n){var i=o.getComponent(cc.Sprite);i.spriteFrame=n+1<=t?e.activeSprite:e.defaultSprite})},i([s(cc.SpriteFrame)],e.prototype,"defaultSprite",void 0),i([s(cc.SpriteFrame)],e.prototype,"activeSprite",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],TableView:[function(t,e,o){"use strict";cc._RF.push(e,"859b5emXE9P+b6/+8VGmAST","TableView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.row=null,e.data=[],e.columns=[],e.pagination={current:0,pageSize:10,total:0},e}return n(e,t),e.prototype.init=function(t,e){this.data=t,this.columns=e,this.pagination.total=t.length,this.renderRows()},e.prototype.renderRows=function(){var t=this.pagination,e=t.current,o=t.pageSize,n=e*o,i=this.data.slice(n,n+o);if(Array.isArray(i)){var r=cc.find("/table/tbody",this.node);r.destroyAllChildren();for(var c=0,s=i;c<s.length;c++){var a=s[c],l=cc.instantiate(this.row);l.getComponent("RowView").init(this.columns,a),l.parent=r}}},e.prototype.handlePrev=function(){this.pagination.current>0&&(this.pagination.current--,this.renderRows())},e.prototype.handleNext=function(){var t=this.pagination,e=t.current,o=t.pageSize;e<t.total/o-1&&(this.pagination.current++,this.renderRows())},i([s(cc.Prefab)],e.prototype,"row",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],TimerUtils:[function(t,e,o){"use strict";cc._RF.push(e,"c1bf47AVkdIibxmemP0Np2A","TimerUtils");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.unix=1e4,e.alert=null,e}return n(e,t),e.prototype.start=function(){this.createTimer()},e.prototype.createTimer=function(){var t=this,e=this.node.getChildByName("label").getComponent(cc.Label);e.string=this.unixToDate(this.unix),e.schedule(function o(){var n=t.unix--;n<=0&&(t.handleTimeout(),e.unschedule(o)),this.string=t.unixToDate(n)},1)},e.prototype.unixToDate=function(t){return(""+Math.floor(t/60)).padStart(2,"0")+"\uff1a"+(""+Math.floor(t%60)).padStart(2,"0")},e.prototype.handleTimeout=function(){this.alert.getComponent("AlertView").fail()},i([s(cc.Node)],e.prototype,"alert",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],request:[function(t,e,o){"use strict";var n;cc._RF.push(e,"88e23U7SqpOGpss9yOqA0Fk","request"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t.JSON="json",t.BLOB="blob"}(n||(n={}));var i="http://122.10.97.40:8088/api",r={method:"GET",timeout:1e4,requestType:n.JSON,responeType:n.JSON};function c(t,e){var o=i+t,n=cc.sys.localStorage.getItem("walletId");return"GET"===e.method.toLocaleUpperCase()&&(o=o+"?strWallet="+n),o}function s(t){var e=cc.sys.localStorage.getItem("walletId"),o=t.method,i=t.requestType,r=void 0===i?n.JSON:i,c=t.data,s=void 0===c?{}:c;return s.WalletId=s.WalletId||s.walletId||e,"POST"===o.toLocaleUpperCase()?r===n.JSON?JSON.stringify(s):s:null}function a(t){var e=t.response,o=t.responseText,i=t.responeType,r=void 0===i?n.JSON:i;return r===n.JSON?JSON.parse(o):r===n.BLOB?e:o}o.default=function(t,e){void 0===e&&(e=r);var o=e.method,n=e.timeout,i=e.onprogress,l=cc.sys.localStorage.getItem("token");return new Promise(function(r,u){var p=new XMLHttpRequest;p.timeout=n,p.open(o.toLocaleUpperCase(),c(t,e)),p.setRequestHeader("Content-type","application/json"),p.setRequestHeader("Authorization","Bearer "+l),p.send(s(e)),p.onreadystatechange=function(){if(4==p.readyState)if(p.status>=200&&p.status<400){var t=a(p),e=t.code,o=t.Code;0===e||0===o?r(t):u(t)}else u(p.statusText)},p.ontimeout=function(){u("\u8bf7\u6c42\u8d85\u65f6")},i&&(p.onprogress=i)})},cc._RF.pop()},{}]},{},["GameController","LoginController","CellModel","ConstValue","GameModel","GameModelTest","AudioUtils","TimerUtils","request","AlertView","AssetsView","CellView","CountView","EffectLayer","GridView","ItemView","ModalView","RankView","RewardView","RowView","SiderView","SignInView","StarView","TableView"]);